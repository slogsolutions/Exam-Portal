{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Army Candidate Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --army-green:#1e2e22;
      --army-green-light:#3a4d39;
      --army-gold:#d4af37;
      --army-muted:#cfcfcf;
      --card-bg:rgba(20,30,20,0.88);
    }
    html,body{height:100%;margin:0;}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      background: url("{% static 'registration/army.jpg' %}") no-repeat center center fixed;
      background-size: cover;
      color:#f0f0f0;
      display:flex;align-items:flex-start;justify-content:center;
      padding:30px 10px;position:relative;
    }
    body::before{
      content:"";position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.45);z-index:-1;
    }
    .wrap{max-width:1050px;width:100%;}
    .title{font-size:34px;font-weight:900;text-align:center;margin:6px 0;color:var(--army-gold);text-shadow:2px 2px 8px rgba(0,0,0,0.9);}
    .subtitle{text-align:center;color:#f0f0f0;margin:0 0 30px;font-size:16px;font-weight:600;text-shadow:1px 1px 6px rgba(0,0,0,0.9);}
    .stepper{display:grid;grid-template-columns:1fr auto 1fr auto 1fr;align-items:center;gap:12px;margin:0 auto 28px;max-width:820px;}
    .step{text-align:center;color:#bbb;font-size:12px;font-weight:600;}
    .step .dot{width:34px;height:34px;border-radius:50%;display:grid;place-items:center;border:2px solid var(--army-gold);color:var(--army-gold);font-weight:800;margin:0 auto 6px;}
    .step.active{color:#fff}.step.active .dot{background:var(--army-gold);color:#000;}
    .line{height:3px;width:100%;background:rgba(255,255,255,0.3);}
    .card{max-width:760px;margin:0 auto;background:var(--card-bg);border-radius:16px;padding:28px 26px;}
    .card h2{text-align:center;font-size:20px;margin:0 0 18px;font-weight:800;color:var(--army-gold);}
    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
    .grid-1 {grid-template-columns: 1fr;}
    label {
      display: block;
      font-weight: 700;
      font-size: 14px;
      color: var(--army-gold);
      margin-bottom: 6px;
    }

    input, select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      background: var(--army-green-light);
      color: #fff;
      border: 1.5px solid rgba(255,255,255,0.2);
      box-sizing: border-box;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }
    input:focus, select:focus {
      border-color: var(--army-gold);
      outline: none;
      box-shadow: 0 0 6px var(--army-gold);
    }

    select {
      background-image: url("data:image/svg+xml;utf8,<svg fill='%23d4af37' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 18px;
      padding-right: 40px;
      cursor: pointer;
    }
    select option {
      background: var(--army-green);
      color: #fff;
    }

    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(72%) sepia(85%) saturate(450%) hue-rotate(20deg) brightness(1.2);
      cursor: pointer;
      opacity: 1;
    }

    input[readonly]{background:rgba(255,255,255,0.1);color:#ddd;}
    .actions{display:flex;justify-content:space-between;gap:12px;margin-top:18px;}
    .btn{flex:1;padding:12px 18px;border-radius:10px;font-weight:800;font-size:15px;cursor:pointer;}
    .btn-ghost{border:2px solid var(--army-gold);color:var(--army-gold);background:transparent;}
    .btn-primary{background:var(--army-gold);color:#000;}
    .form-step{display:none}.form-step.active{display:block}
    .footer-container {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }
    .footer-note {
      color: var(--army-gold);
      background: rgba(30,46,34,0.9);
      padding: 6px 14px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.6);
      margin-top: 6px;
      font-weight: 700;
    }
    .footer-note.developed { font-size: 16px; }
    .footer-note.reserved { font-size: 13px; font-weight: 600; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">ARMY CANDIDATE REGISTRATION</div>
    <div class="subtitle">Defence Personnel Registration Portal</div>

    <!-- Stepper -->
    <div class="stepper" id="stepper">
      <div class="step active"><div class="dot">1</div>Account<br/>Info</div>
      <div class="line"></div>
      <div class="step"><div class="dot">2</div>Personal<br/>Details</div>
      <div class="line"></div>
      <div class="step"><div class="dot">3</div>Exam Details<br/>Details</div>
    </div>

    <form id="regForm" class="card" method="post" enctype="multipart/form-data" 
      action="{% url 'register_candidate' %}" novalidate>

      {% csrf_token %}
      <!-- Step 1 -->
      <section class="form-step active" data-step="1">
        <h2>Account Information</h2>
        <div class="grid">
          <div><label>Username *</label><input type="text" name="username" required /></div>
          <div><label>Password *</label><input type="password" name="password" required /></div>
        </div>
        <div class="actions">
          <button type="button" class="btn btn-ghost" disabled>Previous</button>
          <button type="button" class="btn btn-primary" data-next>Next</button>
        </div>
      </section>

      <!-- Step 2 -->
      <section class="form-step" data-step="2">
        <h2>Personal Details</h2>
        <div class="grid">
          <div><label>Army No / Enrolment No *</label><input type="text" name="army_no" required /></div>
          <div><label>Rank *</label><input type="text" name="rank" required /></div>
          <div>
            <label>Trade *</label>
            <select name="trade" required>
              <option value="">-- Select Trade --</option>
              <option>TTC</option><option>OCC</option><option>DTMN</option><option>EFS</option>
              <option>DVM</option><option>LMN</option><option>(CLK SD)</option><option>STEWARD</option>
              <option>WASHERMAN (HOUSE KEEPER)</option><option>CHEFCOM (MESS KEEPER)</option>
              <option>SKT</option><option>MUSICIAN</option><option>(ARTSN WW)</option>
              <option>(HAIR DRESSER)</option><option>(SP STAFF)</option>
            </select>
          </div>
          <div><label>Name *</label><input type="text" name="name" required /></div>
          <div><label>Date of Birth *</label><input type="date" name="dob" required /></div>
          <div><label>Date of Enrollment *</label><input type="date" name="doe" required /></div>
          <div><label>Aadhar No *</label><input type="text" name="aadhar_number" pattern="[0-9]{12}" maxlength="12" required /></div>
          <div><label>Fatherâ€™s Name *</label><input type="text" name="father_name" required /></div>
          <div class="grid-1"><label>Photograph *</label><input type="file" name="photograph" accept="image/*" required /></div>
        </div>
        <div class="actions">
          <button type="button" class="btn btn-ghost" data-prev>Previous</button>
          <button type="button" class="btn btn-primary" data-next>Next</button>
        </div>
      </section>

      <!-- Step 3 -->
      <section class="form-step" data-step="3">
        <h2>Exam Details</h2>
        <div class="grid">
          <div><label>Qualification *</label> 
            <select name="qualification" required> 
              <option value="">Select</option> 
              <option value="Primary/Secondary">Primary/Secondary</option> 
              <option value="Secondary">Secondary</option> 
            </select> 
          </div>
          <div><label>NSQF Level</label><input type="text" name="nsqf_level" value="4.5" readonly /></div>
          <div>
            <label>Exam Center *</label>
            <select name="exam_center" required>
              <option value="">-- Select Exam Center --</option>
              <option>Jaipur</option><option>Hissar</option><option>Bathinda</option>
              <option>Sriganganagar</option><option>Bikaner</option><option>Suratgarh</option>
              <option>Kota</option><option>Port Blair</option>
              <option>Ahmednagar</option><option>Bangalore</option><option>Chennai</option>
              <option>Pune MINTSD</option><option>MCTE Mhow</option>
              <option>Secunderabad</option><option>Jhansi</option><option>Ahmedabad</option>
              <option>Jodhpur</option><option>Saugor</option><option>Bhopal</option><option>Pune</option>
              <option>Binaguri</option><option>Kolkata</option><option>Missamari</option>
              <option>Rangapahar</option><option>Dinjan</option><option>Gangtok</option>
              <option>Leimakhong</option><option>Tenga</option><option>Panagarh</option>
              <option>Ranchi</option><option>Likabali</option><option>Tejpur</option>
              <option>Kalimpong</option>
              <option>Jalandhar</option><option>Ambala</option><option>Delhi</option>
              <option>Amritsar</option><option>Ferozepur</option><option>Patiala</option>
              <option>Jammu</option><option>Pathankot</option><option>Chandimandir</option>
              <option>Meerut</option>
              <option>Agra</option><option>Bareilly</option><option>Jabalpur</option>
              <option>Lucknow</option><option>Ranikhet</option><option>Dehradun</option>
              <option>Udhampur</option><option>Baramula</option><option>Kargil</option>
              <option>Leh</option><option>Srinagar</option><option>Kupwara</option>
              <option>Allahabad</option><option>Rajouri</option><option>Akhnoor</option>
              <option>Nagrota</option><option>Palampur</option><option>Mathura</option>
              <option>Karu</option>
            </select>
          </div>
          <div>
            <label>Training Center *</label>
            <select id="training_center" name="training_center" required>
              <option value="">-- Select Training Center --</option>
              <option value="1 Signal Training Center">1 Signal Training Center</option>
              <option value="2 Signal Training Center">2 Signal Training Center</option>
            </select>
          </div>
          <div><label>State *</label><input type="text" id="state" name="state" readonly required /></div>
          <div><label>District *</label><input type="text" id="district" name="district" readonly required /></div>
          <div><label>Duration of Qualification</label><input type="text" name="duration" /></div>
          <div><label>Credits</label><input type="text" name="credits" /></div>
          <div>
            <label>Shift *</label>
            <select name="shift" required>
              <option value="">-- Select Shift --</option>
              {% for shift in shifts %}
                <option value="{{ shift.id }}">{{ shift }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="actions">
          <button type="button" class="btn btn-ghost" data-prev>Previous</button>
          <button type="submit" class="btn btn-primary">ðŸš€ Register Candidate</button>
        </div>
      </section>
    </form>
  </div>

  <script>
    const steps = Array.from(document.querySelectorAll('.form-step'));
    const stepDots = Array.from(document.querySelectorAll('.stepper .step'));
    let current = 0;
    function showStep(i){ steps.forEach((s,idx)=>s.classList.toggle('active', idx===i));
      stepDots.forEach((d,idx)=>d.classList.toggle('active', idx<=i)); current = i;}
    document.querySelectorAll('[data-next]').forEach(b=>b.addEventListener('click', ()=>showStep(Math.min(current+1, steps.length-1))));
    document.querySelectorAll('[data-prev]').forEach(b=>b.addEventListener('click', ()=>showStep(Math.max(current-1, 0))));
    const tc=document.getElementById('training_center'), state=document.getElementById('state'), district=document.getElementById('district');
    function applyCenter(v){ if(v==='1 Signal Training Center'){state.value='MP';district.value='Jabalpur';} else if(v==='2 Signal Training Center'){state.value='Goa';district.value='Goa';} else {state.value='';district.value='';}}
    tc.addEventListener('change', e=>applyCenter(e.target.value)); applyCenter(tc.value||'');
  </script>
  <div class="footer-container">
    <div class="footer-note developed">Developed by SLOG Solutions Pvt Ltd and 2STC</div>
    <div class="footer-note reserved">All Rights Reserved @ SLOG Solutions Pvt Ltd</div>
  </div>
</body>
</html>
